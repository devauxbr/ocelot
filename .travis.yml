sudo: false
language: java
jdk: oraclejdk7
before_install:
   - pip install --user codecov
install: mvn deploy --settings .travis-settings.xml -DskipTests=true -Dgpg.skip=true
after_success: 
   - codecov
branches:
  only:
   - master
   - coverity_scan
env:
  global:
   # OSS_USERNAME
   - secure: "F+D8Ab3VljNY4w0SGOHLymUcxmisIJDMnSbLDfcW1VGRMOgNiGn79/7Vf4O9HeCd0XnQRJ9n1d5538ITqBnSCpZuMHwqLyHxJHC95wmpA8V1UYVA95TUHCH9Dd1372JK3uI05ZnVXUFLT1FHAYNbgVVMuJf/yyzaTZgeuRb4epY="
   #- secure: "dcYhoyzhLyLGdtL69zBNgvndD8b/8WjjFpZJoBCy5Ew760INfNK19hDOE/8FpWNar4Lu9/KfgNnj2S5FsF0sFQzcaqjXOfkwYrUevmQqE3zTVtQzSo0VLeclTVEFaqgJSOre2oHZtZj4wWcA3H3oZ5tYRIr5pzq/hlRSOosZQCM="
   # OSS_PASSWORD
   - secure: "erME4L4b57ZGgvppUTEl6mIK9UugihJN3PpISfxzXiS3JlYFCGFa1dDF+hHU0MUcobjvzO6QpwizKQ8rH7F9oqgSlGg3vi0wLSVA3arPHyrGvcp21ViubxHkPg9lfX/SfRCspa/nNGGnHRaJmabbnDnMlxRqyQuFUOf93v+mduc="
   #- secure: "DakTIC0o14UC0fEbU2zNsOYAzGShdj1JrmXrS7iJPtJKIkkMclhpnOBG0Hqg2LN11q12jmGO5xbcrfkSph7oE/JMgfobr8NDvUX6Mb3azt7ro5j8m1WUngx5W1FDoApDd4YatV7JNTyWBh8zoYovhJ3t/ACadLL5lyon8H6oM70="
   # GPG_PASSPHRASE
   - secure: "N+gUkhYkGQtkI/gajXdlz0Wl/xuNcwM8o5p/xXnnu0+diDrl/TNDBg9tO6xv6kNsFH4Rn9UpP5g6AbB79JPlZJ2/wzdyWuQRZfCcr2NOxedGp7peOsEqpGhZmk1z8Jn4OF9WiDPvc5qxoQ1ilUM3mH5wXCSXHULTHvZFdNafYZE="
   #- secure: "IceZIWYE55lWayWU3yCcO0YOONsUdJdK4kywltTBNkt7m+KsgG0or5gl1feamR+dZSfHukWWw2ujrRXt3sWBBxeLtzi3BOXJCMoK0eRnR/FWTMrDtK7YWzCfy7BiYtq3cirRwXTwjECv9pROeQiS8YBMD2X0N4Ob2zZw+OEdJco="
   # COVERITY_SCAN_TOKEN
   - secure: "A4k3D6+FsZ1I5vUF9pAtXsZZxltthBb00jLXwP+pwe+Zfmf7rxAUL+01gUf5+ZoacWOKvgj+OdWJGCJMun3XaPGXpPWL0fIyWv8SvPQAIzHj9SnpoSHH+zpUHsEoq/m1MpzExWiBa4XEFIKCzTbPqWyOBbV/LGOYK6AQtRamJuc="
   #- secure: "Rq+vTWVD/r/v3rFYo7zcETqHVI/AlSYXCVfB/66AOn5/g2raCyvuIleIHgclXyKsJijjDEkIxzDifIEdUYvsGWPurrN/V0HY5IaOImwJ6XduLC8iT5xYP+dEOB1+KTv3c3hlRv77TqfdwWdq7abNDjhs3ehiHQzPRquWn2ECJ84="
   # ORACLE_USERNAME
   - secure: "HC6MjTCz3IQuSmiqqmr+o2Bmh5gwbQHBVnGeoucBlX3/RBttOge4ymJj1waKhgyHeLd9jlWP2tkmh34H0h6P7jOKo755cftkCGWARfhvlxL7lzYSOMUiSgzVHqqQKIStxKav2Xr3tgqSxRGU0AcZG97zxGMMoWKVgkXHDBOUneU="
   #- secure: "SW69Zyu9C9tQ17bypqbQAZOZH/4aYnTQZn/1Ce+2HwKl1ChSPrIBy9UXISELq8YnHV+HbHE0SLs3nHEwbTVaf/LAIMKZLLErZZSp9coYUhKNILh2td5ymuQBoOtwMezwkCnqpUNva9I/c1MSi3HbwrLSDdtXbMKJioUyr5yPDmM="
   # ORACLE_PASSWORD
   - secure: "DHkU9TtQjRXWGhlKt5nOzknijazmZigaCiPf0CCk3ejhqSy7smP47XjUnMb7H2/dHP1E4pJF2QCtdZ7TS0fNzdbfJ5LQapDGg34BOS8p6peY1Dfs7J+e4/AIRVIAnx2G/loEKZK3MyUSNTLAgFUzMdSNUUVMVV8m3OvnCX7wShA="
   #- secure: "dLftsA5olB2ctKw+kj4U2mqxlJzFO5ipYrjtUy3qNXMrj0KoLv6csZLhLTYydbWlt9Xpw0uXzb3eab7HXCBSc08OfayDtzDr3QFkdnm4sGfqE6l5IKtfX/kac17CG7gUwtESLHMS4MDMuorZbv6f5NR35qtjaCjVP1/r4d1Qq4w="

addons:
   coverity_scan:
      project:
         name: "ocelotds/ocelot"
         description: "Build submitted via Travis CI"
      notification_email: "francois.achache@gmail.com"
      build_command_prepend: "mvn clean"
      build_command: "mvn compile -DskipTests=true -Dgpg.skip=true"
      branch_pattern: coverity_scan

